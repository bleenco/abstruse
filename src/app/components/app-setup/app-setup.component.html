<div class="hero is-fullheight">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-multiline">
        <div class="column is-8 is-offset-2">
          <div class="setup-logo">
            <svg width="44px" height="43px" viewBox="0 0 44 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <path d="M43.5416667,23.458631 L33.4583333,17.871131 L33.4583333,6.78482143 C33.4583333,6.43005952 33.275,6.1639881 33,5.98660714 L22.4583333,0.133035714 C22.1833333,-0.0443452381 21.8166667,-0.0443452381 21.5416667,0.133035714 L11,5.98660714 C10.725,6.1639881 10.5416667,6.43005952 10.5416667,6.78482143 L10.5416667,17.9598214 L0.458333333,23.458631 C0.183333333,23.6360119 0,23.9020833 0,24.2568452 L0,35.8752976 C0,36.2300595 0.183333333,36.496131 0.458333333,36.6735119 L11,42.5270833 C11.1833333,42.6157738 11.275,42.6157738 11.4583333,42.6157738 C11.6416667,42.6157738 11.7333333,42.6157738 11.9166667,42.5270833 L22,36.9395833 L32.0833333,42.5270833 C32.2666667,42.6157738 32.3583333,42.6157738 32.5416667,42.6157738 C32.725,42.6157738 32.8166667,42.6157738 33,42.5270833 L43.5416667,36.6735119 C43.8166667,36.496131 44,36.2300595 44,35.8752976 L44,24.2568452 C44,23.9020833 43.8166667,23.6360119 43.5416667,23.458631 Z M32.5416667,19.4675595 L41.25,24.2568452 L32.5416667,29.046131 L23.8333333,24.2568452 L32.5416667,19.4675595 Z M22,1.99553571 L30.7083333,6.78482143 L22,11.5741071 L13.2916667,6.78482143 L22,1.99553571 Z M12.375,8.29255952 L21.5416667,13.3479167 C21.8166667,13.5252976 22.1833333,13.5252976 22.4583333,13.3479167 L31.625,8.29255952 L31.625,17.871131 L22,23.1925595 L12.375,17.871131 L12.375,8.29255952 Z M11.4583333,19.4675595 L20.1666667,24.2568452 L11.4583333,29.046131 L2.75,24.2568452 L11.4583333,19.4675595 Z M11.4583333,40.6645833 L1.83333333,35.3431548 L1.83333333,25.7645833 L11,30.8199405 C11.275,30.9973214 11.6416667,30.9973214 11.9166667,30.8199405 L21.0833333,25.7645833 L21.0833333,35.3431548 L11.4583333,40.6645833 Z M42.1666667,35.3431548 L32.5416667,40.6645833 L22.9166667,35.3431548 L22.9166667,25.7645833 L32.0833333,30.8199405 C32.3583333,30.9973214 32.725,30.9973214 33,30.8199405 L42.1666667,25.7645833 L42.1666667,35.3431548 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
              </g>
            </svg>
          </div>
        </div>
        <div class="column is-10 is-offset-1">
          <div class="setup-content">
            <h1>
              <img src="images/icons/server.svg">
              AbstruseCI Setup
              <span>Configure Abstruse Continous Integration Server</span>
            </h1>
            <hr/>

            <div *ngIf="loading" class="loading">
              <div class="loader"></div>
            </div>

            <div *ngIf="!loading">
              <div *ngIf="step === 'config'">
                <h2>
                  <img src="images/icons/server-status.svg">
                  Server Status
                </h2>
                <div class="setup-list">
                  <div class="setup-list-item">
                    <img class="icon" [src]="serverStatus.docker ? 'images/icons/check-true.svg' : 'images/icons/check-false.svg'"> Docker Installed
                  </div>
                  <div class="setup-list-item">
                    <img class="icon" [src]="serverStatus.dockerRunning ? 'images/icons/check-true.svg' : 'images/icons/check-false.svg'"> Docker Running
                  </div>
                  <div class="setup-list-item">
                    <img class="icon" [src]="serverStatus.sqlite ? 'images/icons/check-true.svg' : 'images/icons/check-false.svg'"> SQLite3 Installed
                  </div>
                </div>
                <hr/>
                <p *ngIf="!readyToSetup">Please make sure that all of the above checkmarks are green as it is mandatory to run Abstruse on this server.</p>
                <button type="button" class="button" (click)="checkConfiguration()" *ngIf="!readyToSetup">Re-check Configuration</button>
                <button type="button" class="button" (click)="continueToDb()" *ngIf="readyToSetup">Continue</button>
              </div>

              <div *ngIf="step === 'db'">
                <h2>
                  <img src="images/icons/password.svg">
                  Administrator Account
                </h2>
                <div class="message blue">
                  <p>
                    <img src="images/icons/info.svg">
                    All fields are mandatory.
                  </p>
                </div>
                <form class="password-form" #userForm="ngForm" (ngSubmit)="createUser()">
                  <div class="columns is-multiline">
                    <div class="column is-6 is-offset-3">
                      <div class="form-field">
                        <label class="form-label">Email</label>
                        <input class="form-input" type="text" name="email" placeholder="Email" [(ngModel)]="user.email" required>
                        <p class="helper">Email is used for username.</p>
                      </div>
                      <div class="form-field">
                        <label class="form-label">Full Name</label>
                        <input class="form-input" type="text" name="name" placeholder="Full Name" [(ngModel)]="user.fullname" required>
                        <p class="helper">John Wayne.</p>
                      </div>
                      <div class="form-field">
                        <label class="form-label">Password</label>
                        <input class="form-input" type="password" name="password" placeholder="Password" [(ngModel)]="user.password" required>
                        <p class="helper">Pick your password.</p>
                      </div>
                      <div class="form-field">
                        <label class="form-label">Repeat Password</label>
                        <input class="form-input" type="password" name="password2" placeholder="Repeat Password" [(ngModel)]="user.confirmPassword" required validateEqual="password">
                        <p class="helper">Repeat picked password from the previous field.</p>
                      </div>
                      <div class="form-field">
                        <button type="submit" class="button green" [disabled]="!userForm.valid">Continue</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>

              <div *ngIf="step === 'docker'">
                <div class="paragraph">
                  <div class="loader"></div>
                  Setting up docker image, please wait ...
                </div>
                <hr/>
                <app-terminal [data]="terminalInput" (outputData)="terminalOutput($event)" [options]="terminalOptions"></app-terminal>
              </div>
              <div *ngIf="step === 'done'">
                <div class="message green">
                  <p>
                    <img src="images/icons/info.svg">
                    Abstruse successfully configured.
                  </p>
                </div>
                <a class="button" routerLink="/login">Login Page</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
