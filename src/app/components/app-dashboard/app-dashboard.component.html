<app-header></app-header>

<nav class="nav sub-nav">
  <div class="container">
    <div class="nav-left is-hidden-mobile">
      <span class="nav-item">
        <h1>Dashboard</h1>
      </span>
    </div>
    <div class="nav-center is-hidden-mobile">

    </div>
    <div class="nav-right"></div>
  </div>
</nav>

<div class="container">
  <div class="columns">
    <div class="column is-12">
      <div class="content">
        <div class="container" *ngIf="loading">
          <img src="images/icons/flickr.svg" class="main-loader">
        </div>

        <div class="columns is-multiline" *ngIf="!loading">

          <div class="column is-7">
            <div class="content-box">
              <app-line-chart [data]="runs"></app-line-chart>
            </div>
          </div>
          <div class="column is-5">
            <div class="content-box">
              <div class="content-box-header">
                <h2>Memory</h2>
                <h3>Overall Memory Consumption</h3>
              </div>
              <div class="info-data-container">
                <span class="label-txt">Total</span>
                <span class="data-txt">{{ memoryHuman?.total }}</span>
              </div>
              <div class="info-data-container">
                <span class="label-txt">Used</span>
                <span class="data-txt">{{ memoryHuman?.used }}</span>
              </div>
              <div class="info-data-container">
                <span class="label-txt">Free</span>
                <span class="data-txt">{{ memoryHuman?.free }}</span>
              </div>
              <hr/>
              <div class="info-data-container">
                <span class="label-txt">Usage</span>
                <div class="data-progress-container green">
                  <span class="data-progress-bar" [style.width]="memoryPercentage + '%'"></span>
                </div>
                <span class="data-txt">
                  {{ memoryPercentage }}%
                </span>
              </div>
            </div>
            <div class="content-box">
              <div class="content-box-header">
                <h2>CPU</h2>
                <h3>Total CPU Usage</h3>
              </div>
              <div *ngIf="!cpuCores?.length">
                <img src="images/icons/flickr.svg" class="main-loader">
              </div>
              <div *ngIf="cpuCores?.length">
                <app-progress-chart [percent]="cpuPercent"></app-progress-chart>
              </div>
            </div>
            <div class="content-box">
              <div class="content-box-header">
                <h2>CPU Cores</h2>
                <h3>CPU Cores Utilization</h3>
              </div>
              <div *ngIf="!cpuCores?.length">
                <img src="images/icons/flickr.svg" class="main-loader">
              </div>
              <div *ngIf="cpuCores?.length">
                <div class="info-data-container" *ngFor="let core of cpuCores; let i = index">
                  <span class="label-txt">Core {{ i }}</span>
                  <div class="data-progress-container green">
                    <span class="data-progress-bar" [style.width]="core + '%'"></span>
                  </div>
                  <span class="data-txt">
                    {{ core }}%
                  </span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
