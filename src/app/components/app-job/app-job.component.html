<app-header></app-header>

<div class="container" *ngIf="loading">
  <img src="images/icons/flickr.svg" class="main-loader">
</div>

<div class="container" [class.hidden]="loading">
  <div class="columns">
    <div class="column is-12">
      <div class="content bg-background">
        <div class="columns is-multiline">
          <div class="column is-12" *ngIf="job">
            <div class="job-top-container">
              <div class="job-top-content">
                <div class="job-top-actions">
                  <div class="columns">
                    <div class="column is-1">
                      <span class="total-time">
                        <span class="icon">
                          <img src="images/icons/clock.svg">
                        </span>
                        {{ job?.time }}
                      </span>
                    </div>
                    <div class="column is-8"></div>
                    <div class="column is-3">
                      <a class="button floated" [routerLink]="['/build', job.builds_id]">
                        <img src="images/icons/back.svg"> Back
                      </a>
                      <button class="button floated green" type="button" (click)="restartJob()">
                        <img src="images/icons/sync.svg">
                        Restart
                      </button>
                      <button class="button floated red" type="button" (click)="stopJob()" [disabled]="job.status !== 'running'">
                        <img src="images/icons/stop.svg">
                        Stop
                      </button>
                    </div>
                  </div>
                </div>
                <div class="columns">
                  <div class="column is-1">
                    <span class="build-icon">
                      <img src="images/icons/clock.svg" *ngIf="job.status === 'queued'">
                      <img class="loading-img" src="images/icons/flickr.svg" *ngIf="job.status === 'running'">
                      <img src="images/icons/check-true.svg" *ngIf="job.status === 'success'">
                      <img src="images/icons/check-false.svg" *ngIf="job.status === 'failed'">
                    </span>
                  </div>
                  <div class="column is-10">
                    <h2 class="bold">{{ job?.build.head_full_name }}</h2>
                    <p>
                      <span>{{ job?.build.head_sha }}</span>
                      <span class="bold">{{ job?.build.message }}</span>
                      <span>{{ job?.build.author }} authored and commited {{ timeWords }} ago.</span>
                  </div>
                  <div class="column is-1"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="column is-12">
            <app-terminal [data]="terminalInput" (outputData)="terminalOutput($event)" [options]="terminalOptions"></app-terminal>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
